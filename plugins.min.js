/*!
 * jQuery-Plugins
 * Author: T. Zengerink (t.zengerink@gmail.com)
 * Copyright (c) 2012 T. Zengerink
 * MIT lisenced, https://raw.github.com/Mytho/jquery-plugins/master/LISENCE.md
 */
var $,Plugins,doc,uniq,win,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};$=jQuery,doc=document,uniq=-1,win=window,Plugins=win.Plugins={},Plugins.cat=function(){return Array.prototype.slice.call(arguments).join("")},Plugins.delay=function(e,t){return setTimeout(t,e)},Plugins.log=function(){var e,t,n,r,i,s;r=Array.prototype.slice.call(arguments),s=[];for(t=0,n=r.length;t<n;t++)e=r[t],s.push((i=win.console)!=null?i.log(e):void 0);return s},Plugins.create=function(e,t){var n;return n=$(doc.createElement(e)),t&&n.addClass(t),n},Plugins.Plugin=function(){function e(e,t){this.id=++uniq,this.config=$.extend({},this.defaults,e),this.invoker=t,this.elId=Plugins.cat(this.config.klass,"-",this.id),this.selector=Plugins.cat("#",this.elId)}return e.prototype.defaults={klass:"plugin"},e}(),Plugins.Dialog=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.defaults={cancelText:"Cancel",confirmText:"OK",contentClass:"dialog-content",headerText:"Confirm",invokeEvent:"click",klass:"dialog",onCancel:function(){},onClose:function(){},onConfirm:function(){},onOpen:function(){},showClose:!0},t.prototype.bind=function(){var e;return e=this,$(Plugins.cat(e.selector," .cancel")).on("click",function(){return e.cancel.apply(e)}),$(Plugins.cat(e.selector," .confirm")).on("click",function(){return e.confirm.apply(e)}),$(doc).keyup(function(t){if($(e.selector).is(":visible")){t.keyCode===13&&e.confirm.apply(e);if(t.keyCode===27)return e.cancel.apply(e)}}),$(win).on("resize scroll",function(){return e.position.apply(e)})},t.prototype.build=function(){return Plugins.create("div",this.config.klass).attr("id",this.elId).appendTo("body"),Plugins.create("div","overlay").appendTo(this.selector),Plugins.create("div","window").appendTo(this.selector),Plugins.create("div","header").appendTo(Plugins.cat(this.selector," .window")),Plugins.create("h3").html(this.config.headerText).appendTo(Plugins.cat(this.selector," .header")),this.config.showClose&&Plugins.create("button","cancel").html("Ã—").appendTo(Plugins.cat(this.selector," .header")),Plugins.create("div","clear").appendTo(Plugins.cat(this.selector," .header")),Plugins.create("div","content").html(this.invoker.next(Plugins.cat(".",this.config.contentClass)).html()).appendTo(Plugins.cat(this.selector," .window")),Plugins.create("div","actions").appendTo(Plugins.cat(this.selector," .window")),Plugins.create("button","cancel").html(this.config.cancelText).appendTo(Plugins.cat(this.selector," .actions")),Plugins.create("button","confirm").html(this.config.confirmText).appendTo(Plugins.cat(this.selector," .actions"))},t.prototype.cancel=function(){var e;return typeof (e=this.config).onCancel=="function"&&e.onCancel(),this.close()},t.prototype.close=function(){var e;return typeof (e=this.config).onClose=="function"&&e.onClose(),$(this.selector).hide()},t.prototype.confirm=function(){var e;return typeof (e=this.config).onConfirm=="function"&&e.onConfirm(),this.close()},t.prototype.open=function(){var e;return $(this.selector).length||(this.build(),this.bind.apply(this)),$(this.selector).show(),this.position(),typeof (e=this.config).onOpen=="function"?e.onOpen():void 0},t.prototype.position=function(){var e,t,n,r;return r=Math.floor($(win).outerWidth()/2),n=Math.floor($(win).outerHeight()/2),t=Math.floor($(Plugins.cat(this.selector," .window")).outerWidth()/2),e=Math.floor($(Plugins.cat(this.selector," .window")).outerHeight()/2),$(Plugins.cat(this.selector," .overlay")).css({height:$(doc).outerHeight(),left:$(win).scrollLeft()}),$(Plugins.cat(this.selector," .window")).css({left:Plugins.cat(r-t+$(win).scrollLeft(),"px"),top:Plugins.cat(n-e+$(win).scrollTop(),"px")})},t}(Plugins.Plugin),$.fn.dialog=function(e){return this.each(function(){var t;return t=new Plugins.Dialog(e,$(this)),t.invoker.next(Plugins.cat(".",t.config.contentClass)).hide(),t.invoker.on(t.config.invokeEvent,function(){return t.open.apply(t)})})},Plugins.Tooltip=function(e){function t(e,n){var r;r=this,t.__super__.constructor.call(this,e,n),this.invoker.on(this.config.invokeShowEvent,function(){if(!$(r.selector).is(":visible"))return r.show.apply(r)}),this.invoker.on(this.config.invokeHideEvent,function(){if($(r.selector).is(":visible"))return r.hide.apply(r)}),$(win).on("scroll",this.position.apply(this))}return __extends(t,e),t.prototype.defaults={attr:"title",delay:100,fade:100,invokeHideEvent:"mouseleave",invokeShowEvent:"mouseenter",klass:"tooltip",margin:3,position:"top"},t.prototype.timer=!1,t.prototype.build=function(){return Plugins.create("div",this.config.klass).attr("id",this.elId).appendTo("body").hide(),Plugins.create("div","arrow").appendTo(this.selector),Plugins.create("div","content").html(this.invoker.attr(this.config.attr)).appendTo(this.selector),this.invoker.attr(this.config.attr,"")},t.prototype.hide=function(){var e;return e=this,clearTimeout(this.timer),this.timer=Plugins.delay(e.config.delay,function(){return $(e.selector).fadeOut(e.config.fade)})},t.prototype.position=function(){var e,t,n,r;r=this.invoker.position(),t=this._reposition(r,this.config.position);switch(t){case"right":n=r.top+this.invoker.outerHeight()/2-$(this.selector).outerHeight()/2,e=r.left+this.invoker.outerWidth()+(5+this.config.margin);break;case"bottom":n=r.top+this.invoker.outerHeight()+(5+this.config.margin),e=r.left+this.invoker.outerWidth()/2-$(this.selector).outerWidth()/2;break;case"left":n=r.top+this.invoker.outerHeight()/2-$(this.selector).outerHeight()/2,e=r.left-$(this.selector).outerWidth()-(5+this.config.margin);break;default:n=r.top-$(this.selector).outerHeight()-(5+this.config.margin),e=r.left+this.invoker.outerWidth()/2-$(this.selector).outerWidth()/2}return $(this.selector).removeClass("top right bottom left").addClass(t).css({left:e,top:n})},t.prototype.show=function(){var e;return e=this,$(this.selector).length||this.build(),this.position(),this.timer=Plugins.delay(e.config.delay,function(){return $(e.selector).fadeIn(e.config.fade)})},t.prototype._reposition=function(e,t){switch(t){case"right":return e.left-$(win).scrollLeft()+this.invoker.outerWidth()+$(this.selector).outerWidth()+15>$(win).width()?"left":t;case"bottom":return e.top-$(win).scrollTop()+this.invoker.outerHeight()+$(this.selector).outerHeight()+15>$(win).height()?"top":t;case"left":return e.left-$(win).scrollLeft()<$(this.selector).outerWidth()+15?"right":t;default:return e.top-$(win).scrollTop()<$(this.selector).outerHeight()+15?"bottom":t}},t}(Plugins.Plugin),$.fn.tooltip=function(e){return this.each(function(){var t;return t=new Plugins.Tooltip(e,$(this))})};