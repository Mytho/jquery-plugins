/*!
 * jQuery-Plugins
 * Author: T. Zengerink (t.zengerink@gmail.com)
 * Copyright (c) 2012 T. Zengerink
 * MIT lisenced, https://raw.github.com/Mytho/jquery-plugins/master/LISENCE.md
 */
var $,Plugins,doc,uniq,win,__hasProp={}.hasOwnProperty,__extends=function(e,t){function r(){this.constructor=e}for(var n in t)__hasProp.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};$=jQuery,doc=document,uniq=-1,win=window,Plugins=win.Plugins={},Plugins.cat=function(){return Array.prototype.slice.call(arguments).join("")},Plugins.log=function(){var e,t,n,r,i,s;r=Array.prototype.slice.call(arguments),s=[];for(t=0,n=r.length;t<n;t++)e=r[t],s.push((i=win.console)!=null?i.log(e):void 0);return s},Plugins.create=function(e,t){var n;return n=$(doc.createElement(e)),t&&n.addClass(t),n},Plugins.Core=function(){function e(e,t){this.id=++uniq,this.config=$.extend({},this.defaults,e),this.invoker=t,this.elId=Plugins.cat(this.config.klass,"-",this.id),this.selector=Plugins.cat("#",this.elId)}return e.prototype.defaults={klass:"plugin"},e}(),Plugins.Dialog=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return __extends(t,e),t.prototype.defaults={cancelText:"Cancel",confirmText:"OK",contentClass:"dialog-content",headerText:"Confirm",invokeEvent:"click",klass:"dialog",onCancel:function(){},onClose:function(){},onConfirm:function(){},onOpen:function(){},showClose:!0},t.prototype.bind=function(){var e;return e=this,$(Plugins.cat(e.selector," .cancel")).on("click",function(){return e.cancel.apply(e)}),$(Plugins.cat(e.selector," .confirm")).on("click",function(){return e.confirm.apply(e)}),$(doc).keyup(function(t){if($(e.selector).is(":visible")){t.keyCode===13&&e.confirm.apply(e);if(t.keyCode===27)return e.cancel.apply(e)}}),$(win).on("resize scroll",function(){return e.position.apply(e)})},t.prototype.build=function(){return Plugins.create("div",this.config.klass).attr("id",this.elId).appendTo("body"),Plugins.create("div","overlay").appendTo(this.selector),Plugins.create("div","window").appendTo(this.selector),Plugins.create("div","header").appendTo(Plugins.cat(this.selector," .window")),Plugins.create("h3").html(this.config.headerText).appendTo(Plugins.cat(this.selector," .header")),this.config.showClose&&Plugins.create("button","cancel").html("Ã—").appendTo(Plugins.cat(this.selector," .header")),Plugins.create("div","clear").appendTo(Plugins.cat(this.selector," .header")),Plugins.create("div","content").html(this.invoker.next(Plugins.cat(".",this.config.contentClass)).html()).appendTo(Plugins.cat(this.selector," .window")),Plugins.create("div","actions").appendTo(Plugins.cat(this.selector," .window")),Plugins.create("button","cancel").html(this.config.cancelText).appendTo(Plugins.cat(this.selector," .actions")),Plugins.create("button","confirm").html(this.config.confirmText).appendTo(Plugins.cat(this.selector," .actions"))},t.prototype.cancel=function(){var e;return typeof (e=this.config).onCancel=="function"&&e.onCancel(),this.close()},t.prototype.close=function(){var e;return typeof (e=this.config).onClose=="function"&&e.onClose(),$(this.selector).hide()},t.prototype.confirm=function(){var e;return typeof (e=this.config).onConfirm=="function"&&e.onConfirm(),this.close()},t.prototype.open=function(){var e;return $(this.selector).length||(this.build(),this.bind.apply(this)),$(this.selector).show(),this.position(),typeof (e=this.config).onOpen=="function"?e.onOpen():void 0},t.prototype.position=function(){var e,t,n,r;return r=Math.floor($(win).outerWidth()/2),n=Math.floor($(win).outerHeight()/2),t=Math.floor($(Plugins.cat(this.selector," .window")).outerWidth()/2),e=Math.floor($(Plugins.cat(this.selector," .window")).outerHeight()/2),$(Plugins.cat(this.selector," .overlay")).css({height:$(doc).outerHeight(),left:$(win).scrollLeft()}),$(Plugins.cat(this.selector," .window")).css({left:Plugins.cat(r-t+$(win).scrollLeft(),"px"),top:Plugins.cat(n-e+$(win).scrollTop(),"px")})},t}(Plugins.Core),$.fn.dialog=function(e){return this.each(function(){var t;return t=new Plugins.Dialog(e,$(this)),t.invoker.next(Plugins.cat(".",t.config.contentClass)).hide(),t.invoker.on(t.config.invokeEvent,function(){return t.open.apply(t)})})};