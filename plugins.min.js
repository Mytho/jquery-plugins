/*!
 * jQuery-Plugins
 * Author: T. Zengerink (t.zengerink@gmail.com)
 * Copyright (c) 2012 T. Zengerink
 * MIT lisenced, https://raw.github.com/Mytho/jquery-plugins/master/LISENCE.md
 */
var $,Dialog,cat,doc,floor,uniq,win;$=jQuery,cat=function(){return Array.prototype.slice.call(arguments).join("")},doc=document,floor=Math.floor,uniq=-1,win=window,Dialog=function(e,t){var n,r,i,s,o,u,a,f,l,c;return a=++uniq,u={cancelText:"Cancel",confirmText:"OK",headerText:"Confirm",contentClass:"dialog-content",elClass:"dialog",onCancel:function(){},onClose:function(){},onConfirm:function(){},onOpen:function(){},showClose:!0,onEvent:"click"},t=$.extend({},u,t),c=cat("#",t.elClass,"-",a),n=function(){return $(cat(c," .cancel")).on("click",i),$(cat(c," .confirm")).on("click",o),$(doc).keyup(function(e){if($(c).is(":visible")){e.keyCode===13&&o();if(e.keyCode===27)return i()}})},r=function(){$(doc.createElement("div")).addClass(t.elClass).attr("id",cat(t.elClass,"-",a)).appendTo("body"),$(doc.createElement("div")).addClass("outer").appendTo(c),$(doc.createElement("div")).addClass("inner").appendTo(c),$(doc.createElement("div")).addClass("header").appendTo(cat(c," .inner")),$(doc.createElement("h3")).html(t.headerText).appendTo(cat(c," .header")),$(doc.createElement("div")).addClass("content").html(e.next(cat(".",t.contentClass)).html()).appendTo(cat(c," .inner")),$(doc.createElement("div")).addClass("actions").appendTo(cat(c," .inner")),$(doc.createElement("button")).addClass("cancel").html(t.cancelText).appendTo(cat(c," .actions")),$(doc.createElement("button")).addClass("confirm").html(t.confirmText).appendTo(cat(c," .actions"));if(t.showClose)return $(doc.createElement("button")).addClass("cancel").html("Ã—").appendTo(cat(c," .header")),$(doc.createElement("div")).addClass("clear").appendTo(cat(c," .header"))},i=function(){return typeof t.onCancel=="function"&&t.onCancel(),s()},s=function(){return typeof t.onClose=="function"&&t.onClose(),$(c).hide()},o=function(){return typeof t.onConfirm=="function"&&t.onConfirm(),s()},f=function(){return $(c).length||(r(),n()),$(c).show(),l(),typeof t.onOpen=="function"?t.onOpen():void 0},l=function(){var e,t,n,r;return r=floor($(win).outerWidth()/2),n=floor($(win).outerHeight()/2),t=floor($(cat(c," .inner")).outerWidth()/2),e=floor($(cat(c," .inner")).outerHeight()/2),$(cat(c," .outer")).css({height:$(doc).outerHeight(),left:$(win).scrollLeft()}),$(cat(c," .inner")).css({left:cat(r-t+$(win).scrollLeft(),"px"),top:cat(n-e+$(win).scrollTop(),"px")})},{config:t,open:f,position:l}},$.fn.dialog=function(e){return this.each(function(){var t;return t=new Dialog($(this),e),$(this).on(t.config.onEvent,t.open),$(cat(".",t.config.contentClass)).hide(),$(win).on("scroll resize",t.position)})};